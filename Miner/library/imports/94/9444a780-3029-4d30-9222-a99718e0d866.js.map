{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\bean/assets\\Script\\bean\\GamePlayer.js"],"names":["cc","Class","extends","Component","properties","score","Label","hook","Node","toolLeft","toolRight","role","roleBomb","onLoad","scoreNum","hookHomeplace","position","scoreComp","getComponent","hookComp","start","onGameStart","onGameOver","setUid","uid","sendThrowHook","throwHook","intArr","throwOut","holdItem","mineCamp","getItemFromHook","intValue","theMineCamp","actOver","callFunc","string","aimPos","node","parent","convertToWorldSpaceAR","spa","spawn","moveTo","fadeOut","runAction","sequence","removeSelf","actOver2","toolCamp","addItemCamp","setScale","v2","aimPos2","checkToolClick","touchPos","clickToolIdx","useTool","toolIdx","Promise","resolve","reject","toolForJump","useItem","then","catch","onBomb","effect","_showRoleBomb","onMagnet","active","setTimeout","_hideRoleBomb","bind"],"mappings":"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","file":"GamePlayer.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\bean","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        score       : cc.Label,\r\n        hook        : cc.Node,\r\n        toolLeft    : cc.Node,\r\n        toolRight   : cc.Node,\r\n        role        : cc.Node,\r\n        roleBomb    : cc.Node,\r\n    },\r\n\r\n    onLoad () {\r\n        this.scoreNum = 0;\r\n        this.hookHomeplace = this.hook.position;\r\n        this.scoreComp = this.score.getComponent(cc.Label);\r\n        this.hookComp = this.hook.getComponent(\"Hook\");\r\n        this.toolLeft = this.toolLeft.getComponent(\"Tool\");\r\n        this.toolRight = this.toolRight.getComponent(\"Tool\");\r\n        // this.roleBomb = this.roleBomb.getComponent(\"Tool\");\r\n    },\r\n\r\n    start () {\r\n    },\r\n\r\n    onGameStart() {\r\n        this.hookComp.onGameStart();\r\n    },\r\n\r\n    onGameOver() {\r\n        this.hookComp.onGameOver();\r\n    },\r\n    // update (dt) {},\r\n\r\n    setUid(uid) {\r\n        this.uid = uid;\r\n        this.hookComp.setUid(uid);\r\n    },\r\n\r\n    sendThrowHook() {\r\n        this.hookComp.sendThrowHook();\r\n    },\r\n\r\n    throwHook(intArr) {\r\n        this.hookComp.throwOut(intArr);\r\n    },\r\n\r\n    holdItem(mineCamp) {\r\n        this.hookComp.holdItem(mineCamp);\r\n    },\r\n\r\n    getItemFromHook(intValue) {\r\n        let theMineCamp = this.hookComp.getItemFromHook(intValue);\r\n        if (!theMineCamp)\r\n            return;\r\n        switch (theMineCamp['type']) {\r\n            case 0:\r\n                let actOver = cc.callFunc(function() {\r\n                    this.scoreNum += theMineCamp['score'];\r\n                    this.scoreComp.string = this.scoreNum;\r\n                }, this);\r\n\r\n                let aimPos = this.scoreComp.node.parent.convertToWorldSpaceAR(this.scoreComp.node.position);\r\n                let spa = cc.spawn(cc.moveTo(1, aimPos), cc.fadeOut(1));\r\n                theMineCamp.node.runAction(cc.sequence(spa, cc.removeSelf(true), actOver));\r\n                break;\r\n            case 1:\r\n                let actOver2 = cc.callFunc(function() {\r\n                    this.scoreNum += theMineCamp['score'];\r\n                    this.scoreComp.string = this.scoreNum;\r\n                }, this);\r\n\r\n                let toolCamp = null;\r\n                if (this.toolLeft.addItemCamp(theMineCamp)) {\r\n                    toolCamp = this.toolLeft;\r\n                } else if (this.toolRight.addItemCamp(theMineCamp)) {\r\n                    toolCamp = this.toolRight;\r\n                } else {\r\n                    theMineCamp.node.runAction(cc.sequence(cc.removeSelf(true), actOver2));\r\n                    return;\r\n                }\r\n                theMineCamp.node.setScale(cc.v2(0.6, 0.6));\r\n                let aimPos2 = this.node.convertToWorldSpaceAR(toolCamp.node.position);\r\n                theMineCamp.node.runAction(cc.sequence(cc.moveTo(1, aimPos2), actOver2));\r\n                break;\r\n        }\r\n\r\n    },\r\n\r\n    checkToolClick(touchPos) {\r\n        let clickToolIdx = -1;\r\n        if (this.toolLeft.checkToolClick(touchPos))\r\n            clickToolIdx = 0;\r\n        else if (this.toolRight.checkToolClick(touchPos))\r\n            clickToolIdx = 1;\r\n        return clickToolIdx;\r\n    },\r\n\r\n    useTool(toolIdx, aimPos) {\r\n        return new Promise((resolve, reject)=>{\r\n            let toolForJump = !toolIdx ? this.toolLeft : this.toolRight;\r\n            toolForJump.useItem(aimPos).then(resolve).catch(reject);\r\n        });\r\n    },\r\n\r\n    onBomb(effect) {\r\n        this._showRoleBomb();\r\n        if (!!effect)\r\n            this.hookComp.onBomb();\r\n    },\r\n\r\n    onMagnet() {\r\n        this.hookComp.onMagnet();\r\n    },\r\n\r\n    // effectSkill(skillType, isEffect) {\r\n    //     this.hookComp.effectSkill(skillType, isEffect);\r\n    //     switch (skillType) {\r\n    //         case 1:\r\n    //             this._showRoleBomb();\r\n    //             break;\r\n    //         case 2:\r\n    //             break;\r\n    //     }\r\n    // },\r\n\r\n    _showRoleBomb() {\r\n        this.roleBomb.active = true;\r\n        this.role.active = false;\r\n        setTimeout(this._hideRoleBomb.bind(this), 2000);\r\n    },\r\n    _hideRoleBomb() {\r\n        this.role.active = true;\r\n        this.roleBomb.active = false;\r\n    }\r\n});\r\n"]}